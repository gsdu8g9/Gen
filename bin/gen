#!/usr/bin/env php
<?php

require dirname(__FILE__) . '/../../../autoload.php';

$opt            = getopt("hvsdi");
$src            = isset($opt['s']) ? $opt['s'] : getcwd();
$dest           = isset($opt['d']) ? $opt['d'] : null;
$verbose        = isset($opt['v']) ? true : false;
$help           = isset($opt['h']) ? true : false;
$init           = isset($opt['i']) ? true : false;

if ($help) {
    echo "
Usage {$argv[0]} <options>\n

Options:
    -s <source>
    -d <destination>
    -v verbose output
    -i init the base tree structure
    -h this help
";

} else if ($init) {
    @mkdir('assets');
    @mkdir('contents');
    @mkdir('extensions');
    @mkdir('templates');

} else {
    $util = new Gen\Util($verbose);
    $config = new Gen\Config;
    $gen  = new Gen\Builder($config, $util);
    $gen->build($src, $dest);
}
